import{_ as q,c as R,o as S,d as G,b as C,e as d,f as u,p as O,j as A,g as e,u as M,s as V,M as j,m as T,B as Z,n as H,w as U,v as K,h as g,x as w,F as ee,r as ce,q as ae,N as _e,t as N,a as te,L as oe,z as c,A as ne,J as le,D as re,C as Q,H as de,I as P}from"./index-44f81212.js";import{c as W,a as X}from"./topic-2bb1c185.js";import{u as ue}from"./note-38a7b855.js";import{m as F}from"./marked.esm-98d564e7.js";const fe=s=>(O("data-v-465897ac"),s=s(),A(),s),pe={id:"note_top_main",class:"relative flex align_items_center justify_content_center"},me=fe(()=>e("img",{class:"note_top_main_bg",src:"https://pic.imgdb.cn/item/65d5a2f19f345e8d0320a3c9.jpg",alt:""},null,-1)),he=[me],ve={__name:"NoteTopInterface",setup(s){return R(),S(()=>{}),G(()=>{}),C(()=>{}),(i,v)=>(d(),u("div",pe,he))}},ge=q(ve,[["__scopeId","data-v-465897ac"]]),be={__name:"NoteBgInterface",setup(s){return R(),S(()=>{}),C(()=>{}),(i,v)=>null}};const ye=s=>(O("data-v-3bef51eb"),s=s(),A(),s),xe={id:"directory_list_main"},$e={class:"catalog-card"},we={class:"catalog-card-header"},ke=ye(()=>e("div",{class:"flex flex_direction_row align_items_center"},[e("span",null,"目录")],-1)),Ie={class:"catalog-content"},Te=["onClick","title"],Ne={__name:"Directory",setup(s){const i=M(),{theme:v}=V(i),{layout:x}=V(i);i.$subscribe((o,t)=>{_(t.theme)}),S(()=>{}),G(()=>{j.off("note_data"),document.removeEventListener("scroll",p)});const p=()=>{if(n.value==null||n.value==null)return;let o=[];for(let t=n.value.length-1;t>=0;t--){const m=n.value[t];if(m.scrollTop<=window.scrollY){if(f.value.id===m.id)return;Object.assign(f.value,m),b(m,!0),o.push(m);let a=m.parent;for(;a;)b(a,!0),o.push(a),a=a.parent;for(const E of n.value)o.includes(E)||b(E,!1);return}}};C(()=>{_(v.value),j.on("note_data",()=>l()),document.addEventListener("scroll",p)});const l=()=>{n.value=k()},n=T([]);Z(n,o=>{o.length>0?document.querySelector("#directory_list_main").style.display="block":document.querySelector("#directory_list_main").style.display="none"});let f=T({});function k(){let o=[],t=["h1","h2","h3"];if(!document.querySelector(".markdown-body"))return o;let a=Array.from(document.querySelectorAll(".markdown-body *")),E=new Set(a.map(y=>y.tagName.toLowerCase()));for(let y=t.length-1;y>=0;y--)E.has(t[y])||t.splice(y,1);let z=t.map(()=>0),se=document.querySelector("#note_top_main").clientHeight-20;for(let y=0;y<a.length;y++){const B=a[y];let Y=B.tagName.toLowerCase(),D=t.indexOf(Y);if(D==-1)continue;let h={id:Y+"-"+B.innerText+"-"+y,level:D,parent:null,children:[],rawName:B.innerText,scrollTop:B.offsetTop+se};if(o.length>0){let $=o.at(-1);if($.level<h.level)h.parent=$,$.children.push(h);else if($.level>h.level){z.fill(0,D+1);let I=$.parent;for(;I;){if(I.level<h.level){I.children.push(h),h.parent=I;break}I=I.parent}}else $.parent&&(h.parent=$.parent,$.parent.children.push(h))}z[D]+=1;let ie=z.slice(0,D+1).join(".");h.isVisible=h.parent==null,h.name=ie+". "+B.innerText,o.push(h)}return o}const r=(o,t)=>{document.getElementsByTagName("body")[0].style.setProperty(o,t)},_=o=>{o?r("--directory_list_bg","#242837"):r("--directory_list_bg","#ffff")};function b(o,t){for(const m of o.children)m.isVisible=t}function L(o){window.scrollTo({top:o,behavior:"smooth"})}return(o,t)=>{const m=H("font-awesome-icon");return d(),u("div",xe,[U(e("div",$e,[e("div",we,[e("div",null,[e("span",null,[w(m,{icon:["fas","bars-staggered"],class:"catalog-icon"})]),ke])]),e("div",Ie,[(d(!0),u(ee,null,ce(n.value,a=>U((d(),u("div",{key:a.id,onClick:E=>L(a.scrollTop),class:ae(["catalog-item",g(f).id==a.id?"active":"not-active"]),style:_e({marginLeft:a.level*20+"px"}),title:a.rawName},N(a.name),15,Te)),[[K,a.isVisible]])),128))])],512),[[K,g(x)]])])}}},Se=q(Ne,[["__scopeId","data-v-3bef51eb"]]);const J=s=>(O("data-v-a51dbe86"),s=s(),A(),s),Ce={id:"topic_right_main"},Le={class:"personal_item intro flex flex_direction_column align_items_center"},Ee=["src"],Be=["textContent"],De=["textContent"],je={class:"topic_class_box flex flex_direction_row"},Re={class:"topic_classification_total_box flex flex_direction_column align_items_center"},Ve=J(()=>e("h3",null,"文章",-1)),qe=["textContent"],Oe=J(()=>e("div",{class:"topic_classification_total_box flex flex_direction_column align_items_center"},[e("h3",null,"分类"),e("span",null,"3")],-1)),Ae=J(()=>e("div",{class:"topic_classification_total_box flex flex_direction_column align_items_center"},[e("h3",null,"笔记"),e("span",null,"1")],-1)),Me={__name:"NoteRightInterface",setup(s){const i=M(),v=te(),x=oe();R(),S(()=>{}),C(()=>{l(i.theme),p(i.layout)}),i.$subscribe((n,f)=>{l(f.theme),p(f.layout)});const p=n=>{const f=document.querySelector("#topic_right_main");n?f.style.display="block":f.style.display="none"},l=n=>{n?(c("--bg_color","#0b0e14"),c("--color","#f7f7f7"),c("--item_bg","#242b3d"),c("--item_shadow","#242b34"),c("--topic_classification_color","#5e6d78"),c("--topic_classification_num_color","#b5b9d6")):(c("--bg_color","#f7f3f5"),c("--color","#4d4949"),c("--item_bg","#fff"),c("--item_shadow","#cacaca4f"),c("--topic_classification_color","#216eba"),c("--topic_classification_num_color","#4d4949"))};return(n,f)=>(d(),u("div",Ce,[e("div",Le,[e("img",{src:g(v).avatar,alt:""},null,8,Ee),e("span",{class:"personal_name",textContent:N(g(v).name)},null,8,Be),e("span",{class:"personal_signature",textContent:N(g(v).signature)},null,8,De),e("div",je,[e("div",Re,[Ve,e("span",{textContent:N(g(x).length())},null,8,qe)]),Oe,Ae])]),w(Se)]))}},ze=q(Me,[["__scopeId","data-v-a51dbe86"]]);const Pe=s=>(O("data-v-2d5e76a7"),s=s(),A(),s),Fe={id:"topic_bottom_main"},He={class:"note_context_switch_box flex flex_direction_row"},Ue={class:"note_switch_item flex flex_direction_column justify_content_center"},Ge={key:0},Je={key:1},Ye={key:2},Ke={class:"note_switch_item flex flex_direction_column justify_content_center"},Qe={key:0},We={key:1},Xe={key:2},Ze=Pe(()=>e("div",{id:"gitalk-container"},null,-1)),et={__name:"NoteBottomInterface",setup(s){const{params:i}=ne(),v=R(),x=M();te(),oe(),S(()=>{}),G(()=>{j.off("note_data")}),x.$subscribe((r,_)=>{k(_.theme)});const p=T(),l=T(),n=T(),f=()=>{const r=i.index-1;r==0?l.value="--":l.value=p.value.directory_list[r-1].name,r==p.value.directory_list.length-1?n.value="--":n.value=p.value.directory_list[r+1].name};C(()=>{k(x.theme),j.on("note_data",r=>{p.value=r,f(),new le({clientID:"429076372c73a03552c6",clientSecret:"e10cf1b42cb0daf8cda1857f8f9a4ab411c4c91e",repo:"TinyFlowersComment",owner:"sparkle520",admin:["sparkle520"],id:p.value.link,language:"zh-CN",distractionFreeMode:!1,proxy:"https://strong-caramel-969805.netlify.app/github_access_token"}).render("gitalk-container")})});const k=r=>{r?(c("--topic_author_info_box_color","#788086"),c("--topic_author_info_box_bg","#1e2433"),c("--topic_author_info_inner_box_color","#f5f5f5")):(c("--topic_author_info_box_color","#b0c4de"),c("--topic_author_info_box_bg","#f8f8ff"),c("--topic_author_info_inner_box_color","#78c1f8"))};return(r,_)=>(d(),u("div",Fe,[e("div",He,[e("div",Ue,[l.value=="--"?(d(),u("div",Ge)):(d(),u("div",Je,"上一章")),l.value=="--"?(d(),u("div",Ye)):(d(),u("div",{key:3,onClick:_[0]||(_[0]=b=>g(v).push(`/note/book/${g(i).id}/${parseInt(g(i).index)-1}`))},N(l.value),1))]),e("div",Ke,[n.value=="--"?(d(),u("div",Qe)):(d(),u("div",We,"下一章")),n.value=="--"?(d(),u("div",Xe)):(d(),u("div",{key:3,onClick:_[1]||(_[1]=b=>g(v).push(`/note/book/${g(i).id}/${parseInt(g(i).index)+1}`))},N(n.value),1))])]),Ze]))}},tt=q(et,[["__scopeId","data-v-2d5e76a7"]]),ot={id:"topic_main"},nt={class:"topic_container"},st={class:"topic_content"},it={class:"topic_text"},ct=["innerHTML"],ut={__name:"NoteInterface",setup(s){const{params:i}=ne(),v=new F.Renderer,x=ue();F.setOptions({renderer:v,gfm:!1,pedantic:!1,sanitize:!0});const p=()=>{r(i.id,i.index)},l=T("");Z(l,_=>{l.value=F(_),Q(()=>{de(document.getElementById("mathjax"))}),Q(()=>{j.emit("note_data",x.get_note_by_id(i.id))})});const n=M(),{theme:f}=V(n),{layout:k}=V(n);n.$subscribe((_,b)=>{W(b.theme),X(b.layout)}),R(),S(()=>{}),C(()=>{W(f.value),X(k.value),p()});const r=(_,b)=>{const L=`/src/assets/note_data/${_}/${b}.md`,o=Object.assign({"/src/assets/note_data/1/1.md":()=>P(()=>import("./1-df6edbfa.js"),[]).then(t=>t.default),"/src/assets/note_data/1/2.md":()=>P(()=>import("./2-831e9083.js"),[]).then(t=>t.default),"/src/assets/note_data/2/1.md":()=>P(()=>import("./1-54226420.js"),[]).then(t=>t.default)});for(const t in o)t==L&&o[t]().then(m=>{l.value=m})};return(_,b)=>{const L=H("TopicLeftInterface"),o=H("Utils"),t=re("highlight");return d(),u(ee,null,[e("div",ot,[w(be,{class:"topic_bg"}),w(ge,{class:"topic_top_interface"}),e("div",nt,[w(L),e("div",st,[e("div",it,[U(e("div",{innerHTML:l.value,id:"mathjax",class:"markdown-body"},null,8,ct),[[t]])]),w(tt)]),w(ze)])]),w(o)],64)}}};export{ut as default};
